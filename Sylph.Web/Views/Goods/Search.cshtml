@model GoodsViewModel
@{
    var itemIndex = 0;
    var sectionIndex = 0;
}
<head>
    <link rel="stylesheet" href="~/css/search.css" />
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
</head>

<div class="container">
    <div style="border-bottom: 1px solid #17a2b8">
        <h1 class="font-weight-bold">Результати пошуку: @Model.SearchQuery</h1>
    </div>
    @foreach (var section in Model.Result)
    {
        if (section.Items.Count > 1)
        {
            itemIndex = 0;
            <div id="carouselControls@(sectionIndex)" data-bs-interval="false" class="carousel slide" data-ride="carousel">
                <div class="carousel-inner">
                    @foreach (var item in section.Items)
                    {
                        <div class="carousel-item @(itemIndex == 0 ? "active" : "")">
                            <div class="item-container" style="@(sectionIndex == Model.Result.Count - 1 ? "" : "border-bottom: 1px solid #17a2b8")">

                                <div class="item-left"> <img class="item-left-img" src="@item.ImageSrc" /></div>
                                <div class="item-right ml-5">
                                    <div>
                                        <h2 class="item-name">
                                            @item.Name
                                        </h2>
                                        <h4>Продавець:  <span class="font-weight-bold" style="color:#17a2b8">@(item.SiteName)</span></h4>
                                    </div>
                                    <div class="item-footer">
                                        <p class="price">@item.Price ₴</p>
                                        <button class="buy-button">
                                            <a class="buy-button-a" href="@item.Url">Переглянути</a>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        itemIndex++;
                    }
                    <a class="carousel-control-prev" href="#carouselControls@(sectionIndex)" role="button" data-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="sr-only">Previous</span>
                    </a>
                    <a class="carousel-control-next" href="#carouselControls@(sectionIndex)" role="button" data-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="sr-only">Next</span>
                    </a>

                </div>
            </div>
            
        }
        else
        {
            @foreach (var item in section.Items)
            {
                    <div class="item-container" style="@(sectionIndex == Model.Result.Count - 1 ? "" : "border-bottom: 1px solid #17a2b8")">
                        <div class="item-left"> <img class="item-left-img" src="@item.ImageSrc" /></div>
                        <div class="item-right ml-5">
                            <div>
                                <h2 class="item-name">
                                    @item.Name
                                </h2>
                                <h4>Продавець:  <span class="font-weight-bold" style="color:#17a2b8">@(item.SiteName)</span></h4>
                            </div>
                            <div class="item-footer">
                                <p class="price">@item.Price ₴</p>
                                <button class="buy-button">
                                    <a class="buy-button-a" href="@item.Url">Переглянути</a>
                                </button>
                            </div>
                        </div>
                    </div>
            }
        }
        sectionIndex++;
    }
</div>